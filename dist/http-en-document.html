<h1>HTTP</h1>
<h2>HTTP</h2>
<p>Hypertext Transfer Protocol</p>
<p>= protocol for requesting and transferring resources over a network</p>
<h2>HTTP</h2>
<p>Pair: Request - Response</p>
<p>Request: from the browser (mostly)</p>
<p>Response: from the server</p>
<p>HTTP requests and responses are transferred via a <em>lower-level</em> protocol, most commonly <em>TCP</em></p>
<h2>Experimenting with HTTP</h2>
<p>via:</p>
<ul>
<li>Firefox tools under <em>network</em></li>
<li>VS Code Plugin <em>HTTP Client</em></li>
</ul>
<h2>HTTP example: Wikipedia</h2>
<p>Request:</p>
<pre><code class="hljs language-http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/wiki/Main_Page</span> HTTP/2.0
<span class="hljs-attribute">Host</span>: en.wikipedia.org
<span class="hljs-attribute">Connection</span>: keep-alive
</code></pre>
<p>Response:</p>
<pre><code class="hljs language-http">HTTP/2.0 <span class="hljs-number">200</span> OK
<span class="hljs-attribute">Date</span>: Wed, 24 Apr 2019 07:50:41 GMT
<span class="hljs-attribute">Content-Type</span>: text/html; charset=UTF-8

<span class="xml"><span class="hljs-meta">&#x3C;!DOCTYPE <span class="hljs-meta-keyword">html</span>></span>
<span class="hljs-tag">&#x3C;<span class="hljs-name">html</span> <span class="hljs-attr">...</span>
</span></span></code></pre>
<h2>HTTP example: Wikipedia search (1)</h2>
<p>request:</p>
<pre><code class="hljs language-http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/w/index.php?search=test&#x26;title=Special:Search&#x26;go=Go</span> HTTP/2.0
<span class="hljs-attribute">Host</span>: en.wikipedia.org
<span class="hljs-attribute">Connection</span>: keep-alive
</code></pre>
<p>response:</p>
<pre><code class="hljs language-http">HTTP/2.0 <span class="hljs-number">302</span> Found
<span class="hljs-attribute">Location</span>: https://en.wikipedia.org/wiki/Test
<span class="hljs-attribute">Content-Length</span>: 0
</code></pre>
<h2>HTTP example: Wikipedia search (2)</h2>
<p>request:</p>
<pre><code class="hljs language-http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/wiki/Test</span> HTTP/2.0
<span class="hljs-attribute">Host</span>: en.wikipedia.org
<span class="hljs-attribute">Connection</span>: keep-alive
</code></pre>
<p>response:</p>
<pre><code class="hljs language-http">HTTP/2.0 <span class="hljs-number">200</span> OK
<span class="hljs-attribute">Content-Type</span>: text/html; charset=UTF-8

<span class="xml"><span class="hljs-meta">&#x3C;!DOCTYPE <span class="hljs-meta-keyword">html</span>></span>
<span class="hljs-tag">&#x3C;<span class="hljs-name">html</span> <span class="hljs-attr">...</span>
</span></span></code></pre>
<h2>HTTP example: POST request</h2>
<p>request:</p>
<pre><code class="hljs language-http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/submit-posting</span> HTTP/2.0
<span class="hljs-attribute">Host</span>: example.com
<span class="hljs-attribute">Connection</span>: keep-alive
<span class="hljs-attribute">Content-Type</span>: text/plain; encoding=UTF-8
<span class="hljs-attribute">Content-Length</span>: 33

<span class="ada">This <span class="hljs-keyword">is</span> the post content (<span class="hljs-keyword">body</span>)
</span></code></pre>
<p>response:</p>
<pre><code class="hljs language-http">HTTP/2.0 <span class="hljs-number">200</span> OK
<span class="hljs-attribute">Content-Type</span>: text/html; charset=UTF-8

<span class="node-repl"><span class="hljs-meta">...</span>
</span></code></pre>
<h2>HTTP example: API</h2>
<pre><code class="hljs language-http"><span class="hljs-attribute">GET /todos/12
Host</span>: jsonplaceholder.typicode.com
<span class="hljs-attribute">Connection</span>: keep-alive
</code></pre>
<pre><code class="hljs language-http">HTTP/2.0 <span class="hljs-number">200</span> OK
<span class="hljs-attribute">Content-Type</span>: application/json; charset=utf-8
<span class="hljs-attribute">Etag</span>: W/"5c-cn8o...

<span class="json">{
  <span class="hljs-attr">"userId"</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">"id"</span>: <span class="hljs-number">12</span>,
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"ipsa repellendus fugit nisi"</span>,
  <span class="hljs-attr">"completed"</span>: <span class="hljs-literal">true</span>
}
</span></code></pre>
<h2>Important request header fields</h2>
<ul>
<li><em><code>Host</code></em></li>
<li><em><code>Connection</code></em></li>
<li><code>Origin</code></li>
<li><code>Accept</code></li>
<li><code>Accept-Encoding</code></li>
<li><code>Cookie</code></li>
<li><code>Cache-Control</code></li>
<li><code>Dnt</code></li>
</ul>
<h2>Important HTTP status codes</h2>
<ul>
<li><code>200 OK</code></li>
</ul>
<!-- list separator -->
<ul>
<li><code>301 Moved Permanently</code></li>
<li><code>307 Temporary Redirect</code> (Redirect to other address)</li>
<li><code>303 See Other</code> (Redirect to other address, HTTP method changes is set to <code>GET</code>)</li>
<li><code>308 Permanent Redirect</code></li>
<li><code>304 Not Modified</code> (Resource did not change since last query)</li>
</ul>
<h2>Important HTTP status codes</h2>
<ul>
<li><code>400 Bad Request</code></li>
<li><code>401 Unauthorized</code></li>
<li><code>403 Forbidden</code></li>
<li><code>404 Not Found</code></li>
</ul>
<!-- list separator -->
<ul>
<li><code>500 Internal Server Error</code></li>
</ul>
<p>see also: <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">https://en.wikipedia.org/wiki/List_of_HTTP_status_codes</a></p>
<h2>Important response header fields</h2>
<ul>
<li><code>Content-Length</code></li>
<li><code>Content-Type</code></li>
<li><code>Set-Cookie</code></li>
<li><code>Location</code></li>
<li><code>Cache-Control</code></li>
</ul>
<h2>Header field "Content-Type"</h2>
<p>possible values:</p>
<ul>
<li><code>text/plain; charset=utf-8</code></li>
<li><code>text/html; charset=utf-8</code></li>
<li><code>application/json</code></li>
<li><code>application/javascript</code></li>
<li><code>application/ecmascript</code></li>
<li><code>image/jpeg</code></li>
<li><code>image/png</code></li>
<li>...</li>
</ul>
<h2>Header field "Set-Cookie"</h2>
<p>example:</p>
<pre><code class="hljs language-http"><span class="hljs-attribute">GET /
Host</span>: www.google.com

<span class="routeros">Set-Cookie: <span class="hljs-attribute">1P_JAR</span>=2019-04-24-08; <span class="hljs-attribute">expires</span>=...; <span class="hljs-attribute">path</span>=/; <span class="hljs-attribute">domain</span>=.google.com
Set-Cookie: <span class="hljs-attribute">IDCC</span>=AN0-TYtU7...fo; <span class="hljs-attribute">expires</span>=...; <span class="hljs-attribute">path</span>=/; <span class="hljs-attribute">domain</span>=.google.com
</span></code></pre>
<h1>HTTP APIs</h1>
<h2>HTTP APIs</h2>
<p>HTTP API / web API = means of transmitting data sets between a client and a web server</p>
<h2>HTTP APIs</h2>
<p>standards:</p>
<ul>
<li>XML-RPC (1998)</li>
<li>SOAP (1999)</li>
<li>JSON-RPC (2005)</li>
<li>REST (2000)</li>
<li>GraphQL (2015)</li>
</ul>
<h2>HTTP APIs</h2>
<p>request format:</p>
<ul>
<li>SOAP: XML</li>
<li>JSON-RPC: JSON</li>
<li>REST: URL + HTTP method (+ URL parameters) (+ request body)</li>
<li>GraphQL: GraphQL query language</li>
</ul>
<p>response format:</p>
<ul>
<li>SOAP: XML</li>
<li>JSON-RPC: JSON</li>
<li>REST: commonly JSON (or XML, ...)</li>
<li>GraphQL: JSON</li>
</ul>
<h2>Comparison of REST, JSON-RPC and GraphQL</h2>
<ul>
<li>fixed vs flexible queries</li>
<li>fixed protocol vs protocol agnostic</li>
</ul>
<h2>Fixed vs flexible queries</h2>
<p><strong>REST</strong>, <strong>JSON-RPC</strong>: <em>endpoints</em> / <em>methods</em> are fixed (e.g. <em>posts_of_friends</em>, <em>suggested_friends</em>, ...)</p>
<p><strong>GraphQL</strong>: client can construct their own query in a flexible way</p>
<p>Advantage of GraphQL: more flexible, new functionality may not need extra code on the backend</p>
<p>Disadvantage of GraphQL: may often need additional code to restrict access (e.g. prevent querying for <em>posts of suggested friends</em>)</p>
<h2>Fixed protocol vs protocol agnostic</h2>
<p><strong>REST</strong> is commonly associated with HTTP, distinguishing API calls by their HTTP methods (<em>get</em>, <em>post</em>, ...)</p>
<p><strong>JSON-RPC</strong> and <strong>GraphQL</strong> could be used with other protocols, e.g. WebSockets</p>
<h2>JSON-RPC</h2>
<p>RPC = remote procedure call</p>
<h2>JSON-RPC</h2>
<p>example request body:</p>
<pre><code class="hljs language-json">{
  <span class="hljs-attr">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-attr">"method"</span>: <span class="hljs-string">"get_todo_by_id"</span>,
  <span class="hljs-attr">"params"</span>: { <span class="hljs-attr">"id"</span>: <span class="hljs-number">1</span> },
  <span class="hljs-attr">"id"</span>: <span class="hljs-number">1234</span>
}
</code></pre>
<p>example response body:</p>
<pre><code class="hljs language-json">{
  <span class="hljs-attr">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-attr">"error"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"result"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">"title"</span>: <span class="hljs-string">"groceries"</span>, <span class="hljs-attr">"completed"</span>: <span class="hljs-literal">false</span> }
  ],
  <span class="hljs-attr">"id"</span>: <span class="hljs-number">1234</span>
}
</code></pre>
<h2>REST</h2>
<p>REST = Representational State Transfer</p>
<p>Mostly via HTTP requests with these methods:</p>
<ul>
<li>querying elements via <code>GET</code></li>
<li>adding an element via <code>POST</code></li>
<li>adding an element at a specific URL via <code>PUT</code></li>
<li>modifying an element via <code>PATCH</code></li>
<li>replacing an element via <code>PUT</code></li>
<li>deleting an element via <code>DELETE</code></li>
<li>any other modification via <code>POST</code></li>
</ul>
<h2>REST examples</h2>
<p><em>get</em>: querying multiple entries:</p>
<pre><code class="hljs language-http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/todos</span> HTTP/2.0
<span class="hljs-attribute">Host</span>: jsonplaceholder.typicode.com
</code></pre>
<p><em>get</em>: querying a single entity:</p>
<pre><code class="hljs language-http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/todos/2</span> HTTP/2.0
<span class="hljs-attribute">Host</span>: jsonplaceholder.typicode.com
</code></pre>
<p><em>get</em>: querying three entities by identifier:</p>
<pre><code class="hljs language-http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/rest/v2/alpha?codes=de;fr;it</span> HTTP/2.0
<span class="hljs-attribute">Host</span>: restcountries.eu
</code></pre>
<h2>REST examples</h2>
<p><em>post</em>: adding an entry:</p>
<pre><code class="hljs language-http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/todos</span> HTTP/2.0
<span class="hljs-attribute">Host</span>: jsonplaceholder.typicode.com
<span class="hljs-attribute">Content-Type</span>: application/json
<span class="hljs-attribute">Content-Length</span>: 27

<span class="json">{
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"learn REST"</span>,
  <span class="hljs-attr">"completed"</span>: <span class="hljs-literal">false</span>
}
</span></code></pre>
<h2>REST examples</h2>
<p><em>patch</em>: changing an entry:</p>
<pre><code class="hljs language-http"><span class="hljs-keyword">PATCH</span> <span class="hljs-string">/todos/6</span> HTTP/2.0
<span class="hljs-attribute">Host</span>: jsonplaceholder.typicode.com
<span class="hljs-attribute">Content-Type</span>: application/json
<span class="hljs-attribute">Content-Length</span>: 23

<span class="json">{
  <span class="hljs-attr">"completed"</span>: <span class="hljs-literal">true</span>
}
</span></code></pre>
<h2>REST examples</h2>
<p><em>delete</em>: deleting an entry:</p>
<pre><code class="hljs language-http"><span class="hljs-keyword">DELETE</span> <span class="hljs-string">/todos/6</span> HTTP/2.0
<span class="hljs-attribute">Host</span>: jsonplaceholder.typicode.com
</code></pre>
<h2>REST examples</h2>
<p><em>post</em>: other request (deleting all completed todos):</p>
<pre><code class="hljs language-http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/todos/delete_completed</span> HTTP/2.0
<span class="hljs-attribute">Host</span>: ...
</code></pre>
<h2>Resources</h2>
<p>example REST APIs:</p>
<ul>
<li><a href="https://jsonplaceholder.typicode.com">jsonplaceholder.typicode.com</a></li>
<li><a href="https://restcountries.eu">restcountries.eu</a></li>
</ul>