<h1>Python and Data Science: Overview</h1>
<h1>Packages</h1>
<h2>Python packages for data science</h2>
<ul>
<li><em>Jupyter</em> &#x26; <em>IPython</em>: interactive Python environments</li>
<li><em>NumPy</em>: library for efficient processing of numerical data</li>
<li><em>Pandas</em>: library for data analysis, based on NumPy</li>
<li><em>Matplotlib</em> and <em>Pyplot</em>: library for data visualization</li>
<li><em>Scikit-Learn</em>: library for machine learning, based on NumPy</li>
<li><em>Keras</em>: library for deep learning (based on <em>TensorFlow</em>)</li>
</ul>
<h2>Compiled packages and Python versions</h2>
<p>Compiled packages (like <em>NumPy</em>, <em>TensorFlow</em> or <em>PyTables</em>) may take several months before they are available for the newest Python version.</p>
<p>recommendation: use an older Python version (e.g. 3.8 instead of 3.9) or a pre-built distribution (like Anaconda)</p>
<h2>Python packages for data science</h2>
<p>installing the most important packages in an existing Python environment:</p>
<pre><code class="hljs language-bash">pip install jupyter numpy pandas matplotlib sklearn tensorflow
</code></pre>
<h1>Jupyter and IPython</h1>
<h2>IPython</h2>
<p>IPython = advanced interactive Python console, supports features like autocompletion</p>
<h2>Jupyter notebooks</h2>
<ul>
<li>interactive Python document (based on IPython)</li>
<li>file format <em>.ipynb</em></li>
<li>may contain code, output text / graphics, documentation / notes</li>
</ul>
<h2>Jupyter interfaces</h2>
<ul>
<li><em>Jupyter Notebook</em>: web-based interface that can run on a remote server or locally</li>
<li><em>JupyterLab</em>: successor to <em>Jupyter Notebook</em></li>
<li><em>VS Code</em>: supports jupyter notebooks</li>
</ul>
<h2>Jupyter notebook - online</h2>
<p>free online Jupyter environments:</p>
<ul>
<li><em>Google Colab</em>: <a href="https://colab.research.google.com">https://colab.research.google.com</a> (login required)</li>
<li><em>kaggle</em> (login required to edit / create notebooks): <a href="https://www.kaggle.com">https://www.kaggle.com</a>
<ul>
<li>popular public notebooks on <em>kaggle</em>: <a href="https://www.kaggle.com/notebooks?sortBy=voteCount">https://www.kaggle.com/notebooks?sortBy=voteCount</a> (login required to edit / create)</li>
</ul>
</li>
<li><em>Binder</em> (limited sessions): <a href="https://jupyter.org/try">https://jupyter.org/try</a></li>
</ul>
<h2>Jupyter packages</h2>
<p>Python packages:</p>
<ul>
<li><em>ipykernel</em> - needed for VS Code support</li>
<li><em>notebook</em> - old standalone browser interface</li>
<li><em>jupyterlab</em> - new standalone browser interface</li>
</ul>
<h2>Jupyter notebook - VS Code</h2>
<p>VS Code can connect to the IPython kernel:</p>
<p>In VS Code's command pallette (F1), search for: <em>Python: Create New Blank Jupyter Notebook</em></p>
<!-- pip install ipykernel - will install ipython, jupyter-core, jupyter-client -->
<h2>Jupyter notebook - Jupyterlab</h2>
<p>run Jupyterlab from the terminal:</p>
<pre><code class="hljs language-bash">jupyter-lab
</code></pre>
<h2>Writing and evaluating code</h2>
<p>Write code into a cell, e.g.</p>
<pre><code class="hljs language-py"><span class="hljs-keyword">import</span> time
time.sleep(<span class="hljs-number">3</span>)
<span class="hljs-string">"hello"</span>
</code></pre>
<p>and press <em>Shift</em> + <em>Enter</em></p>
<h2>Writing and evaluating code</h2>
<p>IPython has numbered inputs, e.g. <code>[1]</code></p>
<p>When a computation is ongoing it will display <code>[*]</code></p>
<h2>Writing and evaluating code</h2>
<p>If the last statement in a cell evaluates to something it will be considered the output and be displayed</p>
<p>(To supress this behavior, end the statement with a semicolon)</p>
<h2>Writing and evaluating code</h2>
<p>interface functionality (varies amongst notebook types):</p>
<ul>
<li>run cell</li>
<li>restart (forgets previous variables and state)</li>
<li>run all cells / restart and run all cells</li>
<li>interrupt evaluation</li>
</ul>
<h2>Writing documentation via markdown</h2>
<p>We can add documentation via the standardized <em>markdown</em> language:</p>
<p>Switch from <em>Code</em> to <em>Markdown</em> and try the following code:</p>
<pre><code class="hljs language-md"><span class="hljs-section"># Heading</span>

<span class="hljs-bullet">-</span> item 1
<span class="hljs-bullet">-</span> item 2
</code></pre>
<p>Run or leave the cell to display the result, double click to edit again</p>
<p><a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">markdown cheatsheet</a></p>
<h2>Documentation</h2>
<p>displaying documentation in any Python console:</p>
<pre><code class="hljs language-py"><span class="hljs-built_in">help</span>(<span class="hljs-built_in">str</span>)
</code></pre>
<p>(navigate through long outputs via <em>Enter</em>, exit via <em>Q</em>)</p>
<p>shortcut for IPython / Jupyter:</p>
<pre><code class="hljs language-ipython"><span class="hljs-built_in">str</span>?
</code></pre>
<h2>Running terminal commands</h2>
<p>IPython includes direct access to many terminal commands, e.g. <code>ls</code>, <code>cd</code>, ...</p>
<p>We can execute any terminal command by prefixing it with <code>!</code></p>
<h1>In depth: Anaconda</h1>
<h2>Anaconda</h2>
<p><em>Anaconda</em> = Python distribution that includes many pre-built packages and developer tools</p>
<p>Uses ~ 3 GB of disk space</p>
<p>includes <em>Conda</em>: environment and package manager (enables installation multiple versions of Python and Python packages)</p>
<h2>Anaconda installation</h2>
<p>download from <a href="https://www.anaconda.com/products/individual">https://www.anaconda.com/products/individual</a></p>
<p>On Windows, the installation path should not contain spaces or underscores (recommendation: <code>C:/anaconda</code>) - see <a href="https://docs.anaconda.com/anaconda/user-guide/faq/#distribution-faq-windows-folder">https://docs.anaconda.com/anaconda/user-guide/faq/#distribution-faq-windows-folder</a></p>
<h2>Anaconda</h2>
<p>to launch a <em>Jupyter</em> notebook: Entry <em>Jupyter Notebook</em> in the start menu / terminal command <code>jupyter notebook</code></p>
<p>Stopping Jupyter: Press <em>Quit</em> in the top right corner of the directory tree view (usually under http://localhost:8888/tree)</p>
<h1>NumPy: overview and demo</h1>
<h2>NumPy</h2>
<p><em>NumPy</em>: library for efficient processing of numerical data - based on multidimensional arrays</p>
<h2>NumPy: overview and demo</h2>
<pre><code class="hljs language-py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># create a 2-dimensional array</span>
iris = np.array([[<span class="hljs-number">5.1</span>, <span class="hljs-number">3.5</span>, <span class="hljs-number">1.4</span>, <span class="hljs-number">0.2</span>],
                 [<span class="hljs-number">4.9</span>, <span class="hljs-number">3.0</span>, <span class="hljs-number">1.4</span>, <span class="hljs-number">0.2</span>],
                 [<span class="hljs-number">4.7</span>, <span class="hljs-number">3.2</span>, <span class="hljs-number">1.3</span>, <span class="hljs-number">0.2</span>],
                 [<span class="hljs-number">4.6</span>, <span class="hljs-number">3.1</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">0.2</span>]])
</code></pre>
<h2>NumPy: overview and demo</h2>
<pre><code class="hljs language-py"><span class="hljs-comment"># get the first column</span>
iris[:, <span class="hljs-number">0</span>]  <span class="hljs-comment"># [5.1, 4.9, 4.7, 4.6]</span>
<span class="hljs-comment"># get the second column</span>
iris[:, <span class="hljs-number">1</span>]  <span class="hljs-comment"># [3.5, 3.0, 3.2, 3.1]</span>
</code></pre>
<h2>NumPy: overview and demo</h2>
<pre><code class="hljs language-py"><span class="hljs-comment"># get the mean value of the first column</span>
iris[:, <span class="hljs-number">0</span>].mean()  <span class="hljs-comment"># 4.825</span>

<span class="hljs-comment"># divide the entries in the first column by the entries</span>
<span class="hljs-comment"># in the second column</span>
iris[:, <span class="hljs-number">0</span>] / iris[:, <span class="hljs-number">1</span>]  <span class="hljs-comment"># [1.46, 1.63, 1.47, 1.48]</span>
</code></pre>
<h1>Pandas: overview and demo</h1>
<h2>Pandas</h2>
<p><em>Pandas</em>: library for data analysis, based on NumPy</p>
<h2>Pandas: overview and demo</h2>
<p>load a data table (<em>DataFrame</em>) from a CSV file:</p>
<pre><code class="hljs language-py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

titanic = pd.read_csv(
    <span class="hljs-string">"https://public.opendatasoft.com/"</span> +
        <span class="hljs-string">"explore/dataset/titanic-passengers/download"</span>,
    delimiter=<span class="hljs-string">";"</span>,
)
</code></pre>
<h2>Pandas: overview and demo</h2>
<p>display data:</p>
<pre><code class="hljs language-py">titanic
</code></pre>
<p>display one column (series):</p>
<pre><code class="hljs language-py">titanic[<span class="hljs-string">"age"</span>]
</code></pre>
<h2>Pandas: overview and demo</h2>
<p>summarize all numeric data:</p>
<pre><code class="hljs language-py">titanic.describe()
</code></pre>
<p>summarize one column (series):</p>
<pre><code class="hljs language-py">titanic[<span class="hljs-string">"age"</span>].describe()
</code></pre>
<p>mean value of one column (series):</p>
<pre><code class="hljs language-py">titanic[<span class="hljs-string">"age"</span>].mean()
</code></pre>
<h2>Pandas: overview and demo</h2>
<p>querying data: passengers younger than 1 year</p>
<pre><code class="hljs language-py">titanic[titanic[<span class="hljs-string">"age"</span>] &#x3C; <span class="hljs-number">1</span>]
</code></pre>
<h2>Pandas: overview and demo</h2>
<p>preparing data for machine learning exercise:</p>
<pre><code class="hljs language-py">titanic_ml = pd.DataFrame({
    <span class="hljs-string">"female"</span>: titanic[<span class="hljs-string">"sex"</span>].replace(
        {<span class="hljs-string">"female"</span>: <span class="hljs-literal">True</span>, <span class="hljs-string">"male"</span>: <span class="hljs-literal">False</span>}
    ),
    <span class="hljs-string">"pclass"</span>: titanic[<span class="hljs-string">"pclass"</span>],
    <span class="hljs-string">"age"</span>: titanic[<span class="hljs-string">"age"</span>],
    <span class="hljs-string">"sibsp"</span>: titanic[<span class="hljs-string">"sibsp"</span>],
    <span class="hljs-string">"survived"</span>: titanic[<span class="hljs-string">"survived"</span>].replace(
        {<span class="hljs-string">"Yes"</span>: <span class="hljs-literal">True</span>, <span class="hljs-string">"No"</span>: <span class="hljs-literal">False</span>}
    )
})

<span class="hljs-comment"># remove rows with missing data</span>
titanic_ml = titanic_ml.dropna()
</code></pre>
<h1>Pyplot: overview and demo</h1>
<h2>Pyplot: overview and demo</h2>
<p><em>Pyplot</em>: data plotting interface - included in matplotlib, accesible from <em>pandas</em></p>
<h2>Pyplot: overview and demo</h2>
<p>using pyplot directly:</p>
<pre><code class="hljs language-py"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt

plt.hist(
    titanic[<span class="hljs-string">"pclass"</span>],
    bins=[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>],
    align=<span class="hljs-string">"left"</span>,
)
plt.xticks([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
</code></pre>
<p>using pyplot from pandas:</p>
<pre><code class="hljs language-py">titanic[<span class="hljs-string">"pclass"</span>].plot.hist(
    bins=[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>],
    align=<span class="hljs-string">"left"</span>,
    xticks=[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],
)
</code></pre>
<h2>Pyplot: overview and demo</h2>
<pre><code class="hljs language-py">plt.boxplot(
    titanic[<span class="hljs-string">"age"</span>].dropna(),
    whis=[<span class="hljs-number">0</span>, <span class="hljs-number">100</span>],
    labels=[<span class="hljs-string">"age"</span>]
)
</code></pre>
<h2>Pyplot: overview and demo</h2>
<pre><code class="hljs language-py">plt.hist(
    titanic[<span class="hljs-string">"age"</span>],
    bins=[<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>, <span class="hljs-number">50</span>, <span class="hljs-number">60</span>, <span class="hljs-number">70</span>, <span class="hljs-number">80</span>],
    color=<span class="hljs-string">"C1"</span>,
)
</code></pre>
<h1>Scikit-learn: overview and demo</h1>
<h2>Scikit-learn: overview and demo</h2>
<p>exercise: predicting survival on the Titanic via a linear regression</p>
<h2>Scikit-learn: overview and demo</h2>
<p>"training" a model:</p>
<pre><code class="hljs language-py"><span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression

passenger_data = titanic_ml[[<span class="hljs-string">"female"</span>, <span class="hljs-string">"pclass"</span>, <span class="hljs-string">"age"</span>, <span class="hljs-string">"sibsp"</span>]]
survived = titanic_ml[<span class="hljs-string">"survived"</span>]

model = LinearRegression()

model.fit(passenger_data, survived)
</code></pre>
<h2>Scikit-learn: overview and demo</h2>
<p>predicting chance of survival for:</p>
<ul>
<li>40-year-old woman in first class (with no siblings or spouses)</li>
<li>40-year-old man in third class (with no siblings or spouses)</li>
</ul>
<pre><code class="hljs language-py">model.predict(
    np.array([
        [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>],
        [<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>],
    ])
)
<span class="hljs-comment"># [0.93, 0.03]</span>
</code></pre>