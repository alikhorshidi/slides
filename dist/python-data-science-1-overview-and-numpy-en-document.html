<h1>Python and Data Science 1: Overview and NumPy</h1>
<h1>Packages</h1>
<h2>Python packages for data science</h2>
<ul>
<li><em>Jupyter</em> &#x26; <em>IPython</em>: interactive Python environments</li>
<li><em>NumPy</em>: library for efficient processing of numerical data</li>
<li><em>Pandas</em>: library for data analysis, based on NumPy</li>
<li><em>Matplotlib</em>: library for data visualization</li>
<li><em>Scikit-Learn</em>: library for machine learning, based on NumPy</li>
<li><em>Keras</em>: library for deep learning</li>
</ul>
<h2>Python packages for data science</h2>
<p>installing the most important packages in an existing Python environment:</p>
<pre><code class="hljs language-bash">pip install jupyter numpy pandas matplotlib sklearn keras
</code></pre>
<p>Note: Packages like <em>NumPy</em> may take some time before they are available for the newest Python version</p>
<h2>Anaconda</h2>
<p><em>Anaconda</em> = Python distribution that includes many pre-built packages and developer tools</p>
<p>Uses ~ 3 GB of disk space</p>
<h2>Anaconda installation</h2>
<p>download from <a href="https://www.anaconda.com/products/individual">https://www.anaconda.com/products/individual</a></p>
<p>On Windows, the installation path should not contain spaces or underscores (recommendation: <code>C:/anaconda</code>) - see <a href="https://docs.anaconda.com/anaconda/user-guide/faq/#distribution-faq-windows-folder">https://docs.anaconda.com/anaconda/user-guide/faq/#distribution-faq-windows-folder</a></p>
<h2>Conda</h2>
<p><em>Conda</em> = management tool for Python packages and environments, used by Anaconda</p>
<p>Enables installation of multiple versions of Python and Python packages</p>
<p>Particularly useful for external libraries that are written in a compiled language</p>
<h2>Pyodide</h2>
<p><em>Pyodide</em> = Python distribution that can be run directly in the Browser (via <em>WebAssembly</em>)</p>
<h1>Jupyter and IPython</h1>
<h2>IPython</h2>
<p>IPython = advanced interactive Python console, supports features like autocompletion</p>
<h2>Jupyter notebooks</h2>
<ul>
<li>interactive Python document (based on IPython)</li>
<li>file format <em>.ipynb</em></li>
<li>may contain code, output text / graphics, documentation / notes</li>
</ul>
<h2>Jupyter interfaces</h2>
<ul>
<li><em>Jupyter Notebook</em>: web-based interface that can run on a remote server or locally</li>
<li><em>JupyterLab</em>: successor to <em>Jupyter Notebook</em></li>
<li><em>VS Code</em>: supports jupyter notebooks</li>
</ul>
<h2>Jupyter notebook - VS Code</h2>
<p>VS Code can connect to the IPython kernel:</p>
<p>In VS Code's command pallette (F1), search for: <em>Python: Create New Blank Jupyter Notebook</em></p>
<!-- pip install ipykernel - will install ipython, jupyter-core, jupyter-client -->
<h2>Jupyter notebook - Anaconda</h2>
<p>Launching Jupyter: Entry <em>Jupyter Notebook</em> in the start menu / terminal command <code>jupyter notebook</code></p>
<p>Stopping Jupyter: Press <em>Quit</em> in the top right corner of the directory tree view (usually under http://localhost:8888/tree)</p>
<p>Python packages: <em>notebook</em> or <em>jupyterlab</em></p>
<h2>Jupyter notebook - online</h2>
<p>free online Jupyter notebooks:</p>
<ul>
<li><em>Binder</em> (limited sessions): <a href="https://jupyter.org/try">https://jupyter.org/try</a></li>
<li>popular public notebooks on <em>kaggle</em>: <a href="https://www.kaggle.com/notebooks?sortBy=voteCount">https://www.kaggle.com/notebooks?sortBy=voteCount</a> (login required to edit / create)</li>
<li><em>Google Colab</em>: <a href="https://colab.research.google.com">https://colab.research.google.com</a> (login required)</li>
</ul>
<h2>Writing and evaluating code</h2>
<p>Write code into a cell, e.g.</p>
<pre><code class="hljs language-py"><span class="hljs-keyword">import</span> time
time.sleep(<span class="hljs-number">3</span>)
<span class="hljs-string">"hello"</span>
</code></pre>
<p>and press <em>Shift</em> + <em>Enter</em></p>
<h2>Writing and evaluating code</h2>
<p>IPython has numbered inputs, e.g. <code>[1]</code></p>
<p>When a computation is ongoing it will display <code>[*]</code></p>
<p>If the last statement in a cell evaluates to something it will be considered the output and be displayed</p>
<h2>Writing and evaluating code</h2>
<p>interface functionality (varies along notebook types):</p>
<ul>
<li>run cell</li>
<li>restart (forgets previous variables and state)</li>
<li>run all cells / restart and run all cells</li>
<li>interrupt evaluation</li>
</ul>
<h2>Writing and evaluating code</h2>
<p>accessing the last output:</p>
<pre><code class="hljs language-py">print(_ * <span class="hljs-number">3</span>)
</code></pre>
<h2>Writing documentation via markdown</h2>
<p>We can add documentation via the standardized <em>markdown</em> language:</p>
<p>Switch from <em>Code</em> to <em>Markdown</em> and try the following code:</p>
<pre><code class="hljs language-md"><span class="hljs-section"># Heading</span>

<span class="hljs-bullet">-</span> item 1
<span class="hljs-bullet">-</span> item 2
</code></pre>
<p>Run or leave the cell to display the result, double click to edit again</p>
<p><a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">markdown cheatsheet</a></p>
<h2>Documentation</h2>
<p>displaying documentation in any Python console:</p>
<pre><code class="hljs language-py"><span class="hljs-built_in">help</span>(<span class="hljs-built_in">str</span>)
</code></pre>
<p>(navigate through long outputs via <em>Enter</em>, exit via <em>Q</em>)</p>
<p>shortcut for IPython / Jupyter:</p>
<pre><code class="hljs language-ipython"><span class="hljs-built_in">str</span>?
</code></pre>
<h2>Tab completion and wildcard expressions</h2>
<pre><code class="hljs language-ipython">*Error?
</code></pre>
<h2>Running terminal commands</h2>
<p>IPython includes direct access to many terminal commands, e.g. <code>ls</code>, <code>cd</code>, ...</p>
<p>We can execute any terminal command by prefixing it with <code>!</code></p>
<h1>NumPy</h1>
<h2>NumPy</h2>
<p>Library for efficient data processing</p>
<p>Data are stored in multidimensional arrays of numeric values which are implemented in an efficient way:</p>
<ul>
<li>smaller memory use than e.g. lists of numbers in Python</li>
<li>much faster execution of operations like element-wise addition of arrays</li>
</ul>
<p>Data can represent images, sound, measurements and much more</p>
<h2>NumPy</h2>
<p>common import convention:</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
</code></pre>
<h2>Arrays</h2>
<p>creating a 1-dimensional array:</p>
<pre><code class="hljs language-py">a1d = np.array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>])
</code></pre>
<h2>Arrays</h2>
<p>creating a 2-dimensional array:</p>
<pre><code class="hljs language-py">a2d = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]])
</code></pre>
<p>output:</p>
<pre><code class="hljs language-py">array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],
       [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>],
       [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]])
</code></pre>
<h2>Arrays</h2>
<p>creating a 3-dimensional array:</p>
<pre><code class="hljs language-py">a3d = np.array([[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]], [[<span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">7</span>,<span class="hljs-number">8</span>]]])
</code></pre>
<p>output:</p>
<pre><code class="hljs language-py">array([[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>],
        [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]],

       [[<span class="hljs-number">5</span>, <span class="hljs-number">6</span>],
        [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>]]])
</code></pre>
<h2>NumPy arrays vs Python lists</h2>
<p>Arrays are implemented in C, the numeric entries are not full Python Objects and require less resources</p>
<h2>NumPy arrays vs Python lists</h2>
<p>Python list (with references to Python integer objects):</p>
<pre><code class="hljs language-py">list_a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
</code></pre>
<p>NumPy array (data are contained within the array without referencing Python integers):</p>
<pre><code class="hljs language-py">array_a = np.array(list_a)
</code></pre>
<p>Fast element-wise operation (implemented in C):</p>
<pre><code class="hljs language-py">array_a * array_a
</code></pre>
<h2>Array shape</h2>
<p>We can query these attributes:</p>
<ul>
<li><code>a3d.shape</code>: (2, 2, 2)</li>
<li><code>a3d.ndim</code>: 3</li>
<li><code>a3d.size</code>: 8</li>
</ul>
<h1>More than one way to do it</h1>
<h2>More than one way to do it</h2>
<p>from the <em>Zen of Python</em>:</p>
<blockquote>
<p>There should be one-- and preferably only one --obvious way to do it.</p>
</blockquote>
<p>this philosophy is often <em>not</em> applied in <em>NumPy</em></p>
<h2>More than one way to do it</h2>
<p>example: transposing an array</p>
<pre><code class="hljs language-py">a2d.T
a2d.transpose()
np.transpose(a2d)
</code></pre>
<h2>NumPy functions vs array methods</h2>
<p>many operations available in two ways:</p>
<ul>
<li>functions in the <code>numpy</code> package</li>
<li>methods of the <code>array</code> class</li>
</ul>
<p>we will be using mostly functions</p>
<h2>NumPy functions vs array methods</h2>
<p>available as functions and methods:</p>
<pre><code class="hljs language-py">np.<span class="hljs-built_in">max</span>(a2d)
a2d.<span class="hljs-built_in">max</span>()
np.<span class="hljs-built_in">round</span>(a2d)
a2d.<span class="hljs-built_in">round</span>()
</code></pre>
<p>available as functions only:</p>
<pre><code class="hljs language-py">np.sin(a2d)
np.exp(a2d)
np.expand_dims(a2d, <span class="hljs-number">2</span>)
</code></pre>
<h1>Numeric types</h1>
<h2>Numeric types</h2>
<ul>
<li><strong>int</strong></li>
<li><strong>float</strong></li>
<li>decimal</li>
</ul>
<h2>Int</h2>
<p>an <em>int8</em> consists of 8 bits and can store 2^8 (256) different numbers</p>
<p>number of representable values for integer types:</p>
<ul>
<li><em>int8</em>: 256 (-128 to +127)</li>
<li><em>int16</em>: 65,536 (-32,768 to +32,767)</li>
<li><em>int32</em>: 4,294,967,296</li>
<li><em>int64</em>: 18,446,744,073,709,551,616</li>
</ul>
<h2>Int</h2>
<p>an <em>unsigned integer (uint)</em> can only represent non-negative numbers</p>
<p>e.g. <em>uint8</em>: 0 to 255</p>
<h2>Float</h2>
<p>standardized way of representing real numbers in computers: <em>IEEE 754</em></p>
<ul>
<li><strong>binary floating point numbers</strong></li>
<li>decimal floating point numbers</li>
</ul>
<h2>Float</h2>
<p>common floating point types:</p>
<ul>
<li><em>float32</em> (<em>single</em>): exact for ~7 decimal digits</li>
<li><em>float64</em> (<em>double</em>): exact for ~16 decimal digits</li>
</ul>
<h2>Float</h2>
<p><strong>rounding errors</strong>: some numbers cannot be represented as floating point numbers, they will always be approximations</p>
<p>examples in the decimal system: 1/3, 1/7, π</p>
<p>examples in the binary system (i.e. <em>floats</em>): 1/10, 1/5, 1/3, π</p>
<p>example: π + π evaluates to <code>6.2</code> when using decimal numbers with a precision of 2 (a more exact result would be <code>6.3</code>)</p>
<p>example: <code>0.1 + 0.2</code> evaluates to ~ <code>0.30000000000000004</code> when using 64 bit floats</p>
<h2>Float</h2>
<p>some operations result in loss of precision - e.g. subtracting numbers that are close to each other</p>
<p>example:</p>
<pre><code class="hljs language-apache"><span class="hljs-attribute">a</span> = <span class="hljs-number">0</span>.<span class="hljs-number">001234567</span> (<span class="hljs-number">7</span> significant decimal places)
<span class="hljs-attribute">b</span> = <span class="hljs-number">0</span>.<span class="hljs-number">001234321</span> (<span class="hljs-number">7</span> significant decimal places)

<span class="hljs-attribute">c</span> = a - b
<span class="hljs-attribute">c</span> = <span class="hljs-number">0</span>.<span class="hljs-number">000000246</span> (<span class="hljs-number">3</span> significant decimal places)
</code></pre>
<h2>Float</h2>
<p>Special values in IEEE 754:</p>
<ul>
<li><code>inf</code> and <code>-inf</code> (infinite values)</li>
<li><code>nan</code> (not-a-number: undefined / unknown value)</li>
</ul>
<h1>Floats in IEEE 754</h1>
<h2>Floats in IEEE 754</h2>
<p>storage format:</p>
<pre><code class="hljs language-txt">(-) 2^e * s
</code></pre>
<ul>
<li>e ... <em>exponent</em></li>
<li>s ... <em>significand</em> / <em>coefficient</em></li>
</ul>
<h2>Examples</h2>
<p>pi as <em>float32</em>:</p>
<p><code>0 10000000 10010010000111111011011</code></p>
<p>2*pi as <em>float32</em>:</p>
<p><code>0 10000001 10010010000111111011011</code></p>
<p>pi/2 as <em>float32</em>:</p>
<p><code>0 01111111 10010010000111111011011</code></p>
<h2>Examples</h2>
<p>numbers <em>0.20000000</em>, <em>0.20000001</em>, ... <em>0.20000005</em> expressed as closest <em>float32</em> numbers:</p>
<ul>
<li><code>0 01111100 10011001100110011001101</code></li>
<li><code>0 01111100 10011001100110011001101</code></li>
<li><code>0 01111100 10011001100110011001110</code></li>
<li><code>0 01111100 10011001100110011001111</code></li>
<li><code>0 01111100 10011001100110011001111</code></li>
<li><code>0 01111100 10011001100110011010000</code></li>
</ul>
<h2>Examples</h2>
<p>Avogadro constant (6.02214076 * 10^23):</p>
<p><code>0 11001101 11111110000110001000001</code></p>
<p>planck length (1.61625518 * 10^-35):</p>
<p><code>0 00001011 01010111101011110110100</code></p>
<h2>Overflow and underflow</h2>
<p>largest <em>float32</em> number:</p>
<p><code>0 11111110 11111111111111111111111</code></p>
<p><code>~ 2^127.9999 ~ 3.403e38</code></p>
<p>smallest positive <em>float32</em> number with full precision:</p>
<p><code>0 00000001 00000000000000000000000</code></p>
<p><code>= 2^-126 ~ 1.175e-36</code></p>
<p>larger numbers will yield <code>inf</code></p>
<p>smaller numbers will lose precision or yield <code>0.0</code></p>
<h2>Special values</h2>
<p>inf: <code>0 11111111 00000000000000000000000</code></p>
<p>nan: <code>0 11111111 00000000000000000000001</code></p>
<h1>Array types</h1>
<h2>Array types</h2>
<p>Each NumPy array can only hold data of one type (e.g. only 64 bit floats or only bytes)</p>
<h2>Array types</h2>
<p>Each array has a predefined data type for all entries</p>
<pre><code class="hljs language-py">a = np.array([<span class="hljs-number">1</span>])
a.dtype <span class="hljs-comment"># int32</span>
b = np.array([<span class="hljs-number">1.0</span>])
b.dtype <span class="hljs-comment"># float64</span>
c = np.array([<span class="hljs-string">'abc'</span>])
c.dtype <span class="hljs-comment"># &#x3C;U3</span>
d = np.array([<span class="hljs-string">b'abc'</span>])
d.dtype <span class="hljs-comment"># |S3</span>
</code></pre>
<h2>Array types</h2>
<p>Types may be stated explicitly:</p>
<pre><code class="hljs language-py">a = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], dtype=<span class="hljs-string">'int64'</span>)
b = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], dtype=<span class="hljs-string">'uint8'</span>)
</code></pre>
<p>If possible, types are converted automatically:</p>
<pre><code class="hljs language-py">c = a + b
c.dtype <span class="hljs-comment"># int64</span>
</code></pre>
<h2>Array types</h2>
<p>common types:</p>
<ul>
<li><em>bool</em> / <em>bool_</em> (stored as 8 bits)</li>
<li><em>int8</em>, <em>int16</em>, <em>int32</em>, <em>int64</em></li>
<li><em>uint8</em>, <em>uint16</em>, <em>uint32</em>, <em>uint64</em></li>
<li><em>float16</em>, <em>float32</em>, <em>float64</em></li>
</ul>
<h2>Float types</h2>
<p>precision for float types:</p>
<ul>
<li><em>float16</em>: ~3 decimal digits</li>
<li><em>float32</em>: ~7 decimal digits</li>
<li><em>float64</em>: ~16 decimal digits</li>
</ul>
<h2>Float types</h2>
<p>float16: exact for ~3 decimal digits</p>
<pre><code class="hljs language-py">np.array([<span class="hljs-number">2.71828</span>, <span class="hljs-number">0.271828</span>], dtype=<span class="hljs-string">"float16"</span>)
<span class="hljs-comment"># array([2.719 , 0.2717])</span>
</code></pre>
<h2>Float types</h2>
<p>float16: overflow</p>
<pre><code class="hljs language-py">np.array([<span class="hljs-number">65450</span>, <span class="hljs-number">65500</span>, <span class="hljs-number">65550</span>], dtype=<span class="hljs-string">"float16"</span>)
<span class="hljs-comment"># array([65440, 65500, inf])</span>
</code></pre>
<p>float16: underflow</p>
<pre><code class="hljs language-py">np.array(
    [<span class="hljs-number">3.141e-5</span>, <span class="hljs-number">3.141e-6</span>, <span class="hljs-number">3.141e-7</span>, <span class="hljs-number">3.141e-8</span>, <span class="hljs-number">3.141e-9</span>],
    dtype=<span class="hljs-string">"float16"</span>
)
<span class="hljs-comment"># array([3.14e-05, 3.16e-06, 2.98e-07, 5.96e-08, 0.00e+00])</span>
</code></pre>
<h1>Creating arrays</h1>
<h2>Creating arrays</h2>
<p>creating a 2x6 array filled with 0:</p>
<pre><code class="hljs language-py">np.zeros((<span class="hljs-number">2</span>, <span class="hljs-number">6</span>))
<span class="hljs-comment"># or</span>
np.full((<span class="hljs-number">2</span>, <span class="hljs-number">6</span>), <span class="hljs-number">0.0</span>)
</code></pre>
<h2>Creating arrays</h2>
<p>creating number sequences:</p>
<pre><code class="hljs language-py">np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">11</span>)
<span class="hljs-comment"># [0.0, 0.1, ... 1.0]</span>
</code></pre>
<pre><code class="hljs language-py">np.arange(<span class="hljs-number">0</span>, <span class="hljs-number">3.14</span>, <span class="hljs-number">0.1</span>)
<span class="hljs-comment"># [0.0, 0.1, ... 3.1]</span>
</code></pre>
<h2>Creating arrays</h2>
<p>creating a 2x2 array of random values:</p>
<pre><code class="hljs language-py"><span class="hljs-comment"># create a random number generator</span>
rng = np.random.default_rng(seed=<span class="hljs-number">1</span>)

<span class="hljs-comment"># floats between 0 and 1:</span>
rng.random((<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))
<span class="hljs-comment"># integers between 1 and 6:</span>
rng.integers(<span class="hljs-number">1</span>, <span class="hljs-number">7</span>, (<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))
</code></pre>
<p>older interface: <code>np.random.random()</code> and <code>np.random.randint()</code></p>
<h1>Selecting array entries</h1>
<h2>Selecting array entries</h2>
<pre><code class="hljs language-py">a1d[<span class="hljs-number">0</span>] <span class="hljs-comment"># 0</span>
a2d[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>] <span class="hljs-comment"># 2</span>
a2d[<span class="hljs-number">0</span>, :] <span class="hljs-comment"># [1, 2, 3]</span>
a2d[:, <span class="hljs-number">0</span>] <span class="hljs-comment"># [1, 4, 7]</span>
</code></pre>
<p>with 2D arrays: <em>[row index, column index]</em></p>
<p>in general:</p>
<ul>
<li>last index: counts rightwards</li>
<li>second to last index (if it exists): counts downwards</li>
</ul>
<h2>Selecting array entries</h2>
<pre><code class="hljs language-py">a2d[<span class="hljs-number">0</span>, :] <span class="hljs-comment"># [1, 2, 3]</span>
</code></pre>
<p>shorter form:</p>
<pre><code class="hljs language-py">a2d[<span class="hljs-number">0</span>] <span class="hljs-comment"># [1, 2, 3]</span>
</code></pre>
<h2>Slices</h2>
<pre><code class="hljs language-py">a1d[:<span class="hljs-number">3</span>] <span class="hljs-comment"># [0, 1, 2]</span>
a1d[<span class="hljs-number">3</span>:<span class="hljs-number">6</span>] <span class="hljs-comment"># [3, 4, 5]</span>
a1d[<span class="hljs-number">6</span>:] <span class="hljs-comment"># [6, 7, 8, 9]</span>
a1d[<span class="hljs-number">0</span>:<span class="hljs-number">8</span>:<span class="hljs-number">2</span>] <span class="hljs-comment"># [0, 2, 4, 6]</span>
</code></pre>
<pre><code class="hljs language-py">a1d[<span class="hljs-number">3</span>:<span class="hljs-number">0</span>:-<span class="hljs-number">1</span>] <span class="hljs-comment"># [3, 2, 1]</span>
a1d[::-<span class="hljs-number">1</span>] <span class="hljs-comment"># [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]</span>
</code></pre>
<pre><code class="hljs language-py">a2d[<span class="hljs-number">1</span>:, :] <span class="hljs-comment"># [[5, 6, 7], [8, 9, 10]]</span>
</code></pre>
<p>also works on Python lists</p>
<h1>Operations on arrays</h1>
<h2>Operators</h2>
<p>Operators are applied element-wise:</p>
<pre><code class="hljs language-py">a = np.array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
b = np.array([<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>])

-a
<span class="hljs-comment"># np.array([0, -1, -2, -3])</span>
a + b
<span class="hljs-comment"># np.array([2, 3, 4, 5])</span>
a * b
<span class="hljs-comment"># np.array([0, 2, 4, 6])</span>
</code></pre>
<h2>Operators</h2>
<p>element-wise comparison of arrays:</p>
<pre><code class="hljs language-py">a &#x3C; b
<span class="hljs-comment"># np.array([True, True, False, False])</span>
a == b
<span class="hljs-comment"># np.array([False, False, True, False])</span>
</code></pre>
<p>Warning: <code>a == b</code> cannot be used reasonably in if statements - use <code>np.array_equal(a, b)</code></p>
<h2>Operators</h2>
<p>operations with single numbers (broadcasting):</p>
<pre><code class="hljs language-py">print(a + <span class="hljs-number">1</span>)
<span class="hljs-comment"># np.array([1, 2, 3, 4])</span>
</code></pre>
<p>Some constants are available directly in NumPy:</p>
<pre><code class="hljs language-py">print(a + np.pi)
print(a + np.e)
print(np.nan)
</code></pre>
<h2>Element-wise functions</h2>
<p>NumPy provides some mathematical functions that are applied element-wise:</p>
<pre><code class="hljs language-py">print(np.sin(a))
<span class="hljs-comment"># [0.0, 0.84147098, 0.9... ]</span>
print(np.sqrt(a))
<span class="hljs-comment"># [0.0, 1.0, 1.414... ]</span>
</code></pre>
<h2>Element-wise functions</h2>
<ul>
<li><code>abs</code></li>
<li><code>sin</code></li>
<li><code>cos</code></li>
<li><code>sqrt</code></li>
<li><code>exp</code></li>
<li><code>log</code></li>
<li><code>log10</code></li>
<li><code>round</code></li>
<li>...</li>
</ul>
<h2>Aggregation functions</h2>
<p><em>Aggregations</em> compute scalar values for an entire array or for each of its rows / columns / ...</p>
<p>sum over all entries:</p>
<pre><code class="hljs language-py">np.<span class="hljs-built_in">sum</span>(a2d)
</code></pre>
<p>sum along axis 0 ("downwards"):</p>
<pre><code class="hljs language-py">np.<span class="hljs-built_in">sum</span>(a2d, axis=<span class="hljs-number">0</span>)
</code></pre>
<p>sum along axis 1 ("rightwards"):</p>
<pre><code class="hljs language-py">np.<span class="hljs-built_in">sum</span>(a2d, axis=<span class="hljs-number">1</span>)
</code></pre>
<h2>Aggregation functions</h2>
<ul>
<li><code>sum</code></li>
<li><code>min</code></li>
<li><code>max</code></li>
<li><code>std</code></li>
<li><code>percentile</code></li>
</ul>
<h2>Exercises</h2>
<p>(see next slides)</p>
<ul>
<li>prices and amounts → total price</li>
<li>kinetic energy</li>
<li>centroid of a triangle</li>
<li>sine and cosine - value table</li>
<li>dice rolls</li>
</ul>
<h2>Exercises</h2>
<p>given an array of prices and an array of quantities, determine the total price:</p>
<pre><code class="hljs language-py">prices = np.array([<span class="hljs-number">3.99</span>, <span class="hljs-number">4.99</span>, <span class="hljs-number">3.99</span>, <span class="hljs-number">12.99</span>])
<span class="hljs-comment"># buying the first item 3 times and the last item 2 times</span>
quantities = np.array([<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>])

<span class="hljs-comment"># solution: 37.95</span>
</code></pre>
<h2>Exercise</h2>
<p>given an array of masses and velocities of some bodies, determine the kinetic energy of every body and the total kinetic of all bodies together</p>
<pre><code class="hljs language-py">masses = np.array([<span class="hljs-number">1.2</span>, <span class="hljs-number">2.2</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">2.0</span>])
velocities = np.array([<span class="hljs-number">12.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">14.0</span>, <span class="hljs-number">7.5</span>])
</code></pre>
<p>formula: E = m*v^2 / 2</p>
<h2>Exercises</h2>
<p>given the coordinates of the vertices of a triangle, determine its centroid (arithmetic mean of its vertices)</p>
<pre><code class="hljs language-py">a = np.array([<span class="hljs-number">5</span>, <span class="hljs-number">1</span>])
b = np.array([<span class="hljs-number">6</span>, <span class="hljs-number">8</span>])
c = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">3</span>])

<span class="hljs-comment"># solution: [4, 4]</span>
</code></pre>
<h2>Exercises</h2>
<p>create a "value table" for the sine and cosine functions in the interval between 0 and 2*pi.</p>
<p>result:</p>
<pre><code class="hljs language-py"><span class="hljs-comment"># x, sin(x), cos(x)</span>
np.array([[<span class="hljs-number">0.0</span>, <span class="hljs-number">0.01</span>, <span class="hljs-number">0.02</span>, ...],
          [<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0099998</span>, <span class="hljs-number">0.0199999</span>, ...],
          [<span class="hljs-number">1.0</span>, <span class="hljs-number">0.99995</span>, <span class="hljs-number">0.99980</span>, ...]])
</code></pre>
<p>using this data, verify the following equation: <em>sin(x)^2 + cos(x)^2 = 1</em></p>
<h2>Exercises</h2>
<p>Simulate 1 million dice rolls with 10 dice each</p>
<h1>Advanced indexing and filtering</h1>
<h2>Boolean indexing</h2>
<pre><code class="hljs language-py">a = np.array([<span class="hljs-number">4.1</span>, <span class="hljs-number">2.7</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">3.8</span>, -<span class="hljs-number">1</span>])

a_valid = a > <span class="hljs-number">0</span>
<span class="hljs-comment"># array([True, True, False, True, False])</span>
a_filtered = a[a_valid]
<span class="hljs-comment"># array([4.1, 2.7, 3.8])</span>

a_invalid = a &#x3C; <span class="hljs-number">0</span>
a_with_nans = np.copy(a)
a_with_nans[a_invalid] = np.nan
<span class="hljs-comment"># array([4.1, 2.7, nan, 3.8, nan])</span>
</code></pre>
<h2>Boolean indexing (short form)</h2>
<pre><code class="hljs language-py">a = np.array([<span class="hljs-number">4.1</span>, <span class="hljs-number">2.7</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">3.8</span>, -<span class="hljs-number">1</span>])

a_filtered = a[a > <span class="hljs-number">0</span>]

a_with_nans = np.copy(a)
a_with_nans[a_with_nans &#x3C; <span class="hljs-number">0</span>] = np.nan
</code></pre>
<h1>NumPy advanced</h1>
<h2>Reshaping arrays</h2>
<pre><code class="hljs language-py">np.reshape(a3d, (<span class="hljs-number">8</span>, )) <span class="hljs-comment"># 1d array</span>
np.reshape(a3d, (<span class="hljs-number">2</span>, <span class="hljs-number">4</span>)) <span class="hljs-comment"># 2d array</span>
</code></pre>
<p>automatic sizing for one axis:</p>
<pre><code class="hljs language-py">np.ravel(a3d) <span class="hljs-comment"># 1d array</span>
np.reshape(a3d, (-<span class="hljs-number">1</span>, )) <span class="hljs-comment"># 1d array</span>
np.reshape(a3d, (<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>)) <span class="hljs-comment"># 2d array</span>
</code></pre>
<h2>Adding an extra dimension</h2>
<p>Adding an extra dimension of length 1: turning a 2 x 2 array into a 2 x 2 x 1 array:</p>
<pre><code class="hljs language-py">np.expand_dims(a2d, <span class="hljs-number">2</span>)
<span class="hljs-comment"># [[[1], [2], [3]],</span>
<span class="hljs-comment">#  [[4], [5], [6]],</span>
<span class="hljs-comment">#  [[7], [8], [9]]]</span>
</code></pre>
<p>alternative:</p>
<pre><code class="hljs language-py">a2d[:, :, np.newaxis]
</code></pre>
<h2>Transposing</h2>
<p>reversing order of axes (flipping axes in 2D):</p>
<pre><code class="hljs language-py">np.transpose(a2d)

a2d.T
</code></pre>
<h2>Slices as views</h2>
<p>In ordinary Python we can make a shallow copy of a list by slicing it - this works differently in NumPy (in order to improve efficiency):</p>
<pre><code class="hljs language-py"><span class="hljs-built_in">list</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
list_copy = <span class="hljs-built_in">list</span>[:]
list_copy[<span class="hljs-number">0</span>] = <span class="hljs-number">10</span> <span class="hljs-comment"># does NOT change list</span>

array = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
array_view = array[:]
array_view[<span class="hljs-number">0</span>] = <span class="hljs-number">10</span> <span class="hljs-comment"># DOES change array</span>
</code></pre>
<h2>Copying arrays</h2>
<p>Arrays can be copied via <code>np.copy()</code></p>
<h2>Concatenating arrays</h2>
<p>concatenating along an axis (axis 0 by default):</p>
<pre><code class="hljs language-py">np.concatenate([a1d, a1d])
np.concatenate([a2d, a2d])
np.concatenate([a2d, a2d], axis=<span class="hljs-number">1</span>)
</code></pre>
<h1>Linear algebra</h1>
<h2>Linear algebra</h2>
<pre><code class="hljs language-py">np.transpose(m)
np.linalg.inv(m)
np.eye(<span class="hljs-number">2</span>) <span class="hljs-comment"># unit matrix</span>
</code></pre>
<h2>Array multiplication</h2>
<p>via the binary Operator <code>@</code></p>
<p>example: rotating several points by 45° / 90° (counterclockwise):</p>
<pre><code class="hljs language-py">points = np.array([[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]])

m = np.array([[np.sqrt(<span class="hljs-number">0.5</span>), np.sqrt(<span class="hljs-number">0.5</span>)],
              [-np.sqrt(<span class="hljs-number">0.5</span>), np.sqrt(<span class="hljs-number">0.5</span>)]])

print(points @ m)
print(points @ m @ m)
</code></pre>
<h2>Array multiplication</h2>
<p>example:</p>
<p>known data: prices of various products, number of items in stock for different stores</p>
<pre><code class="hljs language-py">prices = np.array([<span class="hljs-number">3.99</span>, <span class="hljs-number">12.99</span>, <span class="hljs-number">5.90</span>, <span class="hljs-number">15</span>])
quantities = np.array([[<span class="hljs-number">0</span>, <span class="hljs-number">80</span>, <span class="hljs-number">80</span>, <span class="hljs-number">100</span>],
                       [<span class="hljs-number">100</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],
                       [<span class="hljs-number">50</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">50</span>]])
</code></pre>
<p>wanted: total value for each of the three stores</p>